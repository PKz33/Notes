## 设计模式  
- **观察者模式**  
1. 自定义观察者模式 
```
  public class Subject {
    private List<Observer> list = new ArrayList<Observer>();
    
    public void registerObserver(Observer obs) {
      list.add(obs);
    }
    public void removeObserver(Observer obs) {
      list.remove(obs);
    }
    
    // 通知所有的观察者更新状态
    public void notifyAllObservers() {
      for (Observer obs : list) {
        obs.update(this);
      }
    }
  }
  
  public class ConcreteSubject extends Subject {
    private int state;
    
    public int getState() {
      return state;
    }
    
    public void setState(int state) {
      this.state = state;
      
    }
  }
  
  public interface Observer {
    void update(Subject subject);
  }
  
  public class ObserverA implements Observer {
    // myState需要跟目标对象的state值保持一致
    private int myState;
    
    @Override
    public void update(Subject subject) {
      myState = ((ConcreteSubject)subject).getState();
    }
    
    public int getMyState() {
      return myState;
    }
    
    public void setMyState(int myState) {
      this.myState = myState;
    }
  }
``` 
2. `java.util.Observable`和`java.util.Observer`  
![](./Pics/观察者模式1.png)  
```
  // 目标类
  public class ConcreteSubject extends Observable {
    private int state;
    
    public void set(int s) {
      // 目标对象的状态发生了改变
      state = s;
      
      // 表示目标对象已经做了更改
      setChanged();
      // 通知所有观察者
      notifyObservers(state);
    }
    
    public int getState() {
      return state;
    }
  }  
  
  public class ObserverA implements Observer {
    private int myState;
    
    @Override
    public void update(Observable o, Object arg) {
      myState = ((ConcreteSubject)o).getState();
    }
    
    public int getMyState() {
      return myState;
    }
  }
  
  public static void main(String[] args) {
    // 创建目标对象
    ConcreteSubject subject = new ConcreteSubject();
  
    // 创建观察者
    ObserverA obs1 = new ObserverA();
    ObserverB obs2 = new ObserverB();
    ObserverC obs3 = new ObserverC();
    
    // 将观察者对象添加到目标对象subject的观察者容器中
    subject.addObserver(obs1);
    subject.addObserver(obs2);
    subject.addObserver(obs3);
    
    // 改变subject对象的状态
    subject.set(3000);
    
    // 观察者的状态发生改变
    System.out.println(obs1.getMyState());
    System.out.println(obs2.getMyState());
    System.out.println(obs3.getMyState());
  }
```
